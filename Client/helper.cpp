#include "helper.h"

#include <QPainter>
#include <QPaintEvent>

static char * ship_xpm[] = {
"32 32 11 1",
" 	c None",
".	c #000000",
"+	c #A0D3FF",
"@	c #2B9EFF",
"#	c #535353",
"$	c #BABABA",
"%	c #BFA87C",
"&	c #8C0C0C",
"*	c #E86902",
"=	c #FF9600",
"-	c #050505",
"................................",
"...............+................",
"..............+++...............",
"............+++++++.............",
"...........@+++++++@............",
"..........#.@@+++@@.#...........",
".........#$$..@@@..$$#..........",
".........#%%$$...$$%%#..........",
".........#%%%$$$$$%%%#..........",
"........#&&%%%%%%%%%&&#.........",
"........#&&&%%%%%%%&&&#.........",
".......#&&&&&&%%%&&&&&&#........",
".......##&&&&&&$&&&&&&##........",
".........#####&$&#####..........",
"......###....#&$&#....###.......",
"......$$$####.#$#.#####$$.......",
"......$$$$$$$#.#.#$$$$$$$.......",
"......$$$$$$$$#.#$$$$$$$$.......",
"......$$$$$$$$.#.$$$$$$$$.......",
"......$$$$$$$$.$.$$$$$$$$.......",
"......$$$$$$$.$$$.$$$$$$$.......",
".....#$$$$$$$.$$$.$$$$$$$#......",
".....#$$$$$$$.$$$.$$$$$$$#......",
".....###$$$$.$$$$$.$$$$###......",
"....########.$$$$$.########.....",
"....########.#####.########.....",
"....#.......#######.......#.....",
"......*****.........*****.......",
".....=****=....-...=*****=......",
"......=***=........===**==......",
"......====...........===........",
"................................"};

Helper::Helper()
{
    textPen = QPen(Qt::white);
    textFont.setPixelSize(50);

    background = QBrush(QColor(Qt::black));

    ship = QPixmap(ship_xpm);
}

void Helper::paint(QPainter *painter, QPaintEvent *event, int elapsed)
{
    painter->save();
    // Draw stuff
    painter->fillRect(event->rect(), background);

    int shipx = 50;
    int shipy = 50;
    int sizex = 200;
    int sizey = 200;
    int cx = sizex - shipx;
    int cy = sizey - shipy;

    // Center on ship
    QTransform transform;
    transform.translate(cx, cy);
    painter->setWorldTransform(transform);

    // Draw ship
    painter->translate(shipx - this->ship.width()/2, shipy - this->ship.height()/2);
    painter->drawPixmap(0, 0, this->ship);

    painter->restore();
}
